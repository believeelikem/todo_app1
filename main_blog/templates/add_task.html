{% extends 'base.html' %}
{% load static %}
{% block title %} Add page {% endblock title %}
{% block body %}
  <main class="main-content">
    <h1 class="page-title">Add New Task</h1>

    <section class="form-card">
      <form class="task-form" method="POST">
        {% csrf_token %}
        
        <label>Title</label>
        <input type="text" name="title" placeholder="Enter task title" required>

        <label>Description</label>
        <textarea name="description" rows="5" placeholder="Details..."></textarea>

        <label>Category</label>
        <select name="category" id="category-select" required>
          <option value="" >-- Select a category --</option>
          {% for category in categories %}
            <option value="{{ category.id }}">{{ category.category }}</option>
          {% endfor %}
          <option value="new">+ Create New Category</option>
        </select>

        <div id="new-category-field" style="display:none;">
          <label>New Category</label>
          <input type="text" name="new_category" placeholder="Enter new category name">
        </div>

        <div class="form-actions">
          <button type="submit" class="btn primary">Save Task</button>
          <a class="btn ghost" href="index.html">Cancel</a>
        </div>
      </form>
    </section>
  </main>

  <script>
    const categorySelect = document.getElementById('category-select');
    const newCategoryField = document.getElementById('new-category-field');

    categorySelect.addEventListener('change', function() {
      if (this.value === 'new') {
        newCategoryField.style.display = 'block';
      } else {
        newCategoryField.style.display = 'none';
      }
    });
  </script>
{% endblock body %}
